(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{4143:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var r=s(266),n=s(809),i=s.n(n),o=s(7294),a=s(2212),c=s(9365);const l=/^[og]\s*(.+)?/,h=/^mtllib /,u=/^usemtl /,p=/^usemap /,d=new a.Pa4,m=new a.Pa4,f=new a.Pa4,g=new a.Pa4,b=new a.Pa4;function v(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const s=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);const r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==s?s.smooth:this.smooth,groupStart:void 0!==s?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},s&&s.name&&"function"===typeof s.clone){const e=s.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const s=parseInt(e,10);return 3*(s>=0?s-1:s+t/3)},parseNormalIndex:function(e,t){const s=parseInt(e,10);return 3*(s>=0?s-1:s+t/3)},parseUVIndex:function(e,t){const s=parseInt(e,10);return 2*(s>=0?s-1:s+t/2)},addVertex:function(e,t,s){const r=this.vertices,n=this.object.geometry.vertices;n.push(r[e+0],r[e+1],r[e+2]),n.push(r[t+0],r[t+1],r[t+2]),n.push(r[s+0],r[s+1],r[s+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,s){const r=this.normals,n=this.object.geometry.normals;n.push(r[e+0],r[e+1],r[e+2]),n.push(r[t+0],r[t+1],r[t+2]),n.push(r[s+0],r[s+1],r[s+2])},addFaceNormal:function(e,t,s){const r=this.vertices,n=this.object.geometry.normals;d.fromArray(r,e),m.fromArray(r,t),f.fromArray(r,s),b.subVectors(f,m),g.subVectors(d,m),b.cross(g),b.normalize(),n.push(b.x,b.y,b.z),n.push(b.x,b.y,b.z),n.push(b.x,b.y,b.z)},addColor:function(e,t,s){const r=this.colors,n=this.object.geometry.colors;void 0!==r[e]&&n.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&n.push(r[t+0],r[t+1],r[t+2]),void 0!==r[s]&&n.push(r[s+0],r[s+1],r[s+2])},addUV:function(e,t,s){const r=this.uvs,n=this.object.geometry.uvs;n.push(r[e+0],r[e+1]),n.push(r[t+0],r[t+1]),n.push(r[s+0],r[s+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,s,r,n,i,o,a,c){const l=this.vertices.length;let h=this.parseVertexIndex(e,l),u=this.parseVertexIndex(t,l),p=this.parseVertexIndex(s,l);if(this.addVertex(h,u,p),this.addColor(h,u,p),void 0!==o&&""!==o){const e=this.normals.length;h=this.parseNormalIndex(o,e),u=this.parseNormalIndex(a,e),p=this.parseNormalIndex(c,e),this.addNormal(h,u,p)}else this.addFaceNormal(h,u,p);if(void 0!==r&&""!==r){const e=this.uvs.length;h=this.parseUVIndex(r,e),u=this.parseUVIndex(n,e),p=this.parseUVIndex(i,e),this.addUV(h,u,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let s=0,r=e.length;s<r;s++){const r=this.parseVertexIndex(e[s],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const s=this.vertices.length,r=this.uvs.length;for(let n=0,i=e.length;n<i;n++)this.addVertexLine(this.parseVertexIndex(e[n],s));for(let n=0,i=t.length;n<i;n++)this.addUVLine(this.parseUVIndex(t[n],r))}};return e.startObject("",!1),e}class w extends a.aNw{constructor(e){super(e),this.materials=null}load(e,t,s,r){const n=this,i=new a.hH6(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(s){try{t(n.parse(s))}catch(i){r?r(i):console.error(i),n.manager.itemError(e)}}),s,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new v;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const s=e.split("\n");let r="",n="",i=0,o=[];const c="function"===typeof"".trimLeft;for(let a=0,m=s.length;a<m;a++)if(r=s[a],r=c?r.trimLeft():r.trim(),i=r.length,0!==i&&(n=r.charAt(0),"#"!==n))if("v"===n){const e=r.split(/\s+/);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?t.colors.push(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===n){const e=r.substr(1).trim().split(/\s+/),s=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r.length>0){const e=r.split("/");s.push(e)}}const n=s[0];for(let r=1,i=s.length-1;r<i;r++){const e=s[r],i=s[r+1];t.addFace(n[0],e[0],i[0],n[1],e[1],i[1],n[2],e[2],i[2])}}else if("l"===n){const e=r.substring(1).trim().split(" ");let s=[];const n=[];if(-1===r.indexOf("/"))s=e;else for(let t=0,r=e.length;t<r;t++){const r=e[t].split("/");""!==r[0]&&s.push(r[0]),""!==r[1]&&n.push(r[1])}t.addLineGeometry(s,n)}else if("p"===n){const e=r.substr(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(o=l.exec(r))){const e=(" "+o[0].substr(1).trim()).substr(1);t.startObject(e)}else if(u.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(h.test(r))t.materialLibraries.push(r.substring(7).trim());else if(p.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===n){if(o=r.split(" "),o.length>1){const e=o[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===r)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}t.finalize();const d=new a.ZAu;d.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let l=0,h=t.objects.length;l<h;l++){const e=t.objects[l],s=e.geometry,r=e.materials,n="Line"===s.type,i="Points"===s.type;let o=!1;if(0===s.vertices.length)continue;const c=new a.u9r;c.setAttribute("position",new a.a$l(s.vertices,3)),s.normals.length>0&&c.setAttribute("normal",new a.a$l(s.normals,3)),s.colors.length>0&&(o=!0,c.setAttribute("color",new a.a$l(s.colors,3))),!0===s.hasUVIndices&&c.setAttribute("uv",new a.a$l(s.uvs,2));const h=[];for(let l=0,p=r.length;l<p;l++){const e=r[l],s=e.name+"_"+e.smooth+"_"+o;let c=t.materials[s];if(null!==this.materials)if(c=this.materials.create(e.name),!n||!c||c instanceof a.nls){if(i&&c&&!(c instanceof a.UY4)){const e=new a.UY4({size:10,sizeAttenuation:!1});a.F5T.prototype.copy.call(e,c),e.color.copy(c.color),e.map=c.map,c=e}}else{const e=new a.nls;a.F5T.prototype.copy.call(e,c),e.color.copy(c.color),c=e}void 0===c&&(c=n?new a.nls:i?new a.UY4({size:1,sizeAttenuation:!1}):new a.xoR,c.name=e.name,c.flatShading=!e.smooth,c.vertexColors=o,t.materials[s]=c),h.push(c)}let u;if(h.length>1){for(let e=0,t=r.length;e<t;e++){const t=r[e];c.addGroup(t.groupStart,t.groupCount,e)}u=n?new a.ejS(c,h):i?new a.woe(c,h):new a.Kj0(c,h)}else u=n?new a.ejS(c,h[0]):i?new a.woe(c,h[0]):new a.Kj0(c,h[0]);u.name=e.name,d.add(u)}else if(t.vertices.length>0){const e=new a.UY4({size:1,sizeAttenuation:!1}),s=new a.u9r;s.setAttribute("position",new a.a$l(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(s.setAttribute("color",new a.a$l(t.colors,3)),e.vertexColors=!0);const r=new a.woe(s,e);d.add(r)}return d}}class x extends a.aNw{constructor(e){super(e)}load(e,t,s,r){const n=this,i=""===this.path?a.Zp0.extractUrlBase(e):this.path,o=new a.hH6(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(s){try{t(n.parse(s,i))}catch(o){r?r(o):console.error(o),n.manager.itemError(e)}}),s,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const s=e.split("\n");let r={};const n=/\s+/,i={};for(let a=0;a<s.length;a++){let e=s[a];if(e=e.trim(),0===e.length||"#"===e.charAt(0))continue;const t=e.indexOf(" ");let o=t>=0?e.substring(0,t):e;o=o.toLowerCase();let c=t>=0?e.substring(t+1):"";if(c=c.trim(),"newmtl"===o)r={name:c},i[c]=r;else if("ka"===o||"kd"===o||"ks"===o||"ke"===o){const e=c.split(n,3);r[o]=[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])]}else r[o]=c}const o=new y(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(i),o}}class y{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:a.Wl3,this.wrap=void 0!==this.options.wrap?this.options.wrap:a.rpg}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const s in e){const r=e[s],n={};t[s]=n;for(const e in r){let t=!0,s=r[e];const i=e.toLowerCase();switch(i){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(t=!1)}t&&(n[i]=s)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,s=this.materialsInfo[e],r={name:e,side:this.side};function n(e,s){if(r[e])return;const n=t.getTextureParams(s,r),i=t.loadTexture((o=t.baseUrl,"string"!==typeof(a=n.url)||""===a?"":/^https?:\/\//i.test(a)?a:o+a));var o,a;i.repeat.copy(n.scale),i.offset.copy(n.offset),i.wrapS=t.wrap,i.wrapT=t.wrap,r[e]=i}for(const i in s){const e=s[i];let t;if(""!==e)switch(i.toLowerCase()){case"kd":r.color=(new a.Ilk).fromArray(e);break;case"ks":r.specular=(new a.Ilk).fromArray(e);break;case"ke":r.emissive=(new a.Ilk).fromArray(e);break;case"map_kd":n("map",e);break;case"map_ks":n("specularMap",e);break;case"map_ke":n("emissiveMap",e);break;case"norm":n("normalMap",e);break;case"map_bump":case"bump":n("bumpMap",e);break;case"map_d":n("alphaMap",e),r.transparent=!0;break;case"ns":r.shininess=parseFloat(e);break;case"d":t=parseFloat(e),t<1&&(r.opacity=t,r.transparent=!0);break;case"tr":t=parseFloat(e),this.options&&this.options.invertTrProperty&&(t=1-t),t>0&&(r.opacity=1-t,r.transparent=!0)}}return this.materials[e]=new a.xoR(r),this.materials[e]}getTextureParams(e,t){const s={scale:new a.FM8(1,1),offset:new a.FM8(0,0)},r=e.split(/\s+/);let n;return n=r.indexOf("-bm"),n>=0&&(t.bumpScale=parseFloat(r[n+1]),r.splice(n,2)),n=r.indexOf("-s"),n>=0&&(s.scale.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),n=r.indexOf("-o"),n>=0&&(s.offset.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),s.url=r.join(" ").trim(),s}loadTexture(e,t,s,r,n){const i=void 0!==this.manager?this.manager:a.tEQ;let o=i.getHandler(e);null===o&&(o=new a.dpR(i)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const c=o.load(e,s,r,n);return void 0!==t&&(c.mapping=t),c}}var j=s(1223),k=s(237),_=s(5893);function I(){var e=(0,o.useRef)(null),t=(0,o.useRef)(null),s=(0,o.useRef)({});return(0,o.useEffect)((function(){var n=Math.round(e.current.clientWidth),o=window.innerHeight-71-40,l=function(){var e=(0,r.Z)(i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s.current.scene,n=new w,(new x).load("".concat(j.domain,"/model/school/material.mtl"),(function(e){n.setMaterials(e),n.load("".concat(j.domain,"/model/school/model.obj"),(function(e){e.position.set(0,0,0);var t=.01;e.scale.set(t,t,t),e.position.set(-3e3,0,2e3),r.add(e)}),(function(e){0!==e.total&&t.current&&t.current.handleProcess(Math.round(e.loaded/e.total*100))}),(function(e){console.error("error: ",e)}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=s.current,t=e.control,r=e.renderer,n=e.scene,i=e.camera;t&&t.update(),r.render(n,i)},u=function(){var t=s.current,r=t.camera,n=t.renderer,i=Math.round(e.current.clientWidth),o=window.innerHeight-71-40;r.aspect=i/o,r.updateProjectionMatrix(),n.setSize(i,o)};return function(){var t=new a.CP7({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});t.setPixelRatio(window.devicePixelRatio),t.setSize(n,o),s.current.renderer=t,e.current.appendChild(t.domElement)}(),function(){var e=new a.cPb(75,n/o,10,1e5);e.position.set(-1500,1500,3e3),e.lookAt(0,0,0),s.current.camera=e}(),function(){var e=new a.xsS;e.background=new a.Ilk(0),s.current.scene=e}(),function(){var e=s.current,t=e.camera,r=e.renderer,n=new c.z(t,r.domElement);n.enableDamping=!0,n.enableZoom=!0,n.autoRotate=!0,s.current.control=n}(),function(){var e=s.current.scene;e.add(new a.Mig(16777215,.3));var t=new a.Ox3(16777215,.8*Math.PI);t.position.set(0,5e3,0),e.add(t)}(),l(),s.current.renderer.setAnimationLoop(h),window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}}),[]),(0,_.jsx)(k.Z,{ref:t,className:"interest-demo",children:(0,_.jsx)("div",{ref:e,className:"interest-demo__content"})})}},237:function(e,t,s){"use strict";var r=s(4806),n=s(9552),i=s(4184),o=s.n(i),a=s(7294),c=s(5893);function l(e,t){var s=e.children,i=e.className,l=e.title,h=e.description,u=e.isNarrow,p=(0,a.useState)(0),d=p[0],m=p[1],f=function(e){m(e)};return(0,a.useImperativeHandle)(t,(function(){return{handleProcess:f}})),(0,c.jsxs)("div",{className:o()("app-content",{"app-content--narrow":u},i),ref:t,children:[l&&(0,c.jsx)("h1",{className:"app-content__title",children:l}),(0,c.jsx)("ul",{className:"app-content__description",children:h&&h.length&&h.map((function(e,t){var s=e.val,r=e.style;return(0,c.jsx)("li",{style:r,className:"app-content__description-item",children:s},t)}))}),s,(0,c.jsxs)("div",{className:o()("interest-loading","interest-content-loading",{"interest-loading--hide":0===d||d>=100}),children:[(0,c.jsx)(n.Z,{}),(0,c.jsx)(r.default,{strokeColor:{"0%":"#108ee9","100%":"#87d068"},percent:d,className:"interest-loading__progress"})]})]})}t.Z=(0,a.forwardRef)(l)},901:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/example/school",function(){return s(4143)}])},266:function(e,t,s){"use strict";function r(e,t,s,r,n,i,o){try{var a=e[i](o),c=a.value}catch(l){return void s(l)}a.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,s=arguments;return new Promise((function(n,i){var o=e.apply(t,s);function a(e){r(o,n,i,a,c,"next",e)}function c(e){r(o,n,i,a,c,"throw",e)}a(void 0)}))}}s.d(t,{Z:function(){return n}})}},function(e){e.O(0,[737,676,806,552,365,774,888,179],(function(){return t=901,e(e.s=t);var t}));var t=e.O();_N_E=t}]);