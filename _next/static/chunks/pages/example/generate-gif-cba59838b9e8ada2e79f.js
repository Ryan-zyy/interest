(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{9001:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(5400),i=n(4806),s=n(6155),a=n(1187),c=n(5861),o=n(4942),l=n(7538),u=n(9439),f=n(7757),p=n.n(f),d=n(237),m=n(3911),h=n(7294),g=n(5592),j=n(2850),v=n(8465),b=n(4391),x=n(5893);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=e.onFinish,n=e.handleReset,i=e.onChange,s={maxCount:1,listType:"picture",onChange:function(e){var r=e.file;console.log("onChange:",e),"done"===r.status?(t(e),i({file:r})):0===r.percent&&n()},customRequest:function(e){console.log("customRequest: ",e),e.onSuccess()}};return(0,x.jsx)(v.Z,y(y({},s),{},{children:(0,x.jsx)(r.default,{icon:(0,x.jsx)(b.Z,{}),children:"Upload"})}))}var Z=n(5925),P=n(358);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=[{val:"\u4e0a\u4f20\u89c6\u9891\u751f\u6210 GIF\u3002"},{val:"* \u7eaf\u5728\u7ebf\u8f6c\u6362\uff0c\u65e0\u9700\u4e0a\u4f20\u81f3\u540e\u53f0\uff0c\u8bf7\u653e\u5fc3\u4f7f\u7528\u3002"},{val:"* \u4f9d\u8d56\u5e93\uff1agifshot\uff08https://github.com/yahoo/gifshot\uff09"},{val:"* \u6682\u4e0d\u652f\u6301\u79fb\u52a8\u7aef\u4f7f\u7528\u3002"}];function N(e){var t=l.Z.useForm(),n=(0,u.Z)(t,1)[0],f=(0,h.useState)(""),v=f[0],b=f[1],O=(0,h.useState)(0),y=O[0],_=O[1],N=(0,h.useState)([]),I=N[0],S=N[1],k=(0,h.useState)(!1),C=k[0],D=k[1],R=(0,h.useState)(""),G=R[0],T=R[1],L=(0,h.useState)(0),V=L[0],q=L[1];if(e.isMobile)return(0,x.jsx)(P.Z,E({},e));var B=function(e){var t=document.createElement("video");t.src=e,t.addEventListener("canplay",function(){var r=(0,c.Z)(p().mark((function r(i){var s;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=~~t.duration,_(s),n.setFieldsValue({fragment:[0,s]}),r.t0=S,r.next=6,Promise.all([(0,Z.pB)(e,0),(0,Z.pB)(e,s)]);case 6:r.t1=r.sent,(0,r.t0)(r.t1);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},M=function(){var e=(0,c.Z)(p().mark((function e(t){var n,r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.fragment){e.next=7;break}return n=(0,u.Z)(t.fragment,2),r=n[0],i=n[1],e.t0=S,e.next=5,Promise.all([(0,Z.pB)(v,r),(0,Z.pB)(v,i)]);case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=(0,Z.Ds)(M,500),A=function(){b(""),_(0),S([]),T(""),q(0)},W={labelCol:{span:3},wrapperCol:{span:20,offset:1},labelAlign:"left"};return(0,x.jsx)(d.Z,E(E({className:"interest-generate-gif",title:"Generate GIF",description:F},e),{},{children:(0,x.jsx)("div",{className:"interest-generate-gif__content",children:(0,x.jsxs)(l.Z,E(E({name:"basic",form:n,initialValues:{},onFinish:function(e){var t;console.log("onFinish: ",e),D(!0);var n=(0,u.Z)(e.fragment,2),r=n[0],i=n[1];(0,m.createGIF)((t={gifWidth:200,gifHeight:200,video:[v],numWorkers:2,numFrames:1e3,offset:r},(0,o.Z)(t,"numFrames",10*(i-r)),(0,o.Z)(t,"progressCallback",(function(e){q(Math.round(100*e))})),t),(function(e){var t=e.error,n=e.image;t?a.default.warning(t):(T(n),D(!1))}))}},W),{},{onValuesChange:U,children:[(0,x.jsx)(l.Z.Item,{label:"\u4e0a\u4f20\u89c6\u9891",name:"file",valuePropName:"file",getValueFromEvent:function(e){return console.log("getValueFromEvent: ",e),e&&e.file},rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u89c6\u9891"}],children:(0,x.jsx)(w,{onFinish:function(e){var t=e.file,n=window.URL.createObjectURL(t.originFileObj);b(n),B(n)},handleReset:A})}),v&&(0,x.jsx)(l.Z.Item,{label:"\u89c6\u9891\u9884\u89c8",children:(0,x.jsx)("video",{src:v,controls:!0,width:640,height:360})}),(0,x.jsx)(l.Z.Item,{label:"\u622a\u53d6\u89c6\u9891",name:"fragment",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u62fc\u56fe\u5355\u5143\u5c3a\u5bf8"}],children:(0,x.jsx)(s.Z,{disabled:!y,range:!0,max:y,tipFormatter:function(e){var t="";return e>60&&(t+="".concat(~~(e/60),"min"),e%=60),t+="".concat(e,"s")}})}),I[0]&&(0,x.jsx)(l.Z.Item,E(E({label:"\u5f00\u59cb\u5e27"},W),{},{children:(0,x.jsx)("img",{src:I[0],alt:"preview"})})),I[1]&&(0,x.jsx)(l.Z.Item,E(E({label:"\u7ed3\u675f\u5e27"},W),{},{children:(0,x.jsx)("img",{src:I[1],alt:"preview"})})),C&&(0,x.jsx)(l.Z.Item,E(E({label:"\u751f\u6210\u4e2d"},W),{},{children:(0,x.jsx)(i.default,{percent:V})})),G&&(0,x.jsx)(l.Z.Item,E(E({label:"GIF"},W),{},{children:(0,x.jsx)("img",{src:G,alt:"result"})})),(0,x.jsxs)(l.Z.Item,{wrapperCol:{span:20,offset:4},children:[(0,x.jsx)(r.default,{loading:C,icon:(0,x.jsx)(g.Z,{}),type:"primary",htmlType:"submit",children:"Generate"}),!C&&(0,x.jsx)(r.default,{onClick:function(){n.resetFields(),A()},icon:(0,x.jsx)(j.Z,{}),style:{marginLeft:20},children:"Reset"})]})]}))})}))}},237:function(e,t,n){"use strict";var r=n(4184),i=n.n(r),s=n(7294),a=n(5893);function c(e,t){var n=e.children,r=e.className,s=e.title,c=e.description,o=e.isNarrow;return(0,a.jsxs)("div",{className:i()("app-content",{"app-content--narrow":o},r),ref:t,children:[s&&(0,a.jsx)("h1",{className:"app-content__title",children:s}),(0,a.jsx)("ul",{className:"app-content__description",children:c&&c.length&&c.map((function(e,t){var n=e.val,r=e.style;return(0,a.jsx)("li",{style:r,className:"app-content__description-item",children:n},t)}))}),n]})}t.Z=(0,s.forwardRef)(c)},358:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(6671),i=n(5893);function s(){return(0,i.jsx)(r.default,{image:r.default.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u4e0d\u652f\u6301\u79fb\u52a8\u7aef\u4f7f\u7528",style:{marginTop:100}})}},2193:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/example/generate-gif",function(){return n(9001)}])}},function(e){e.O(0,[676,453,400,829,660,946,774,888,179],(function(){return t=2193,e(e.s=t);var t}));var t=e.O();_N_E=t}]);